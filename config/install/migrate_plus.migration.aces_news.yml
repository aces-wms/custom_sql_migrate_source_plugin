id: aces_news
label: Migrate News from Drupal 8 to Drupal 9
migration_group: aces_news
migration_dependencies: {}
dependencies:
  enforced:
    module:
      - aces_news_migration
source:
  plugin: custom_sql_query
  key: migrate
  keys:
    - nid
  sql_query: 'SELECT ln.nid, fd.title, nb.body_value
              FROM lamp.node ln
              LEFT JOIN lamp.node_field_data fd
              ON ln.nid = fd.nid
              LEFT JOIN lamp.node__body nb
              ON ln.nid = nb.entity_id'
process:
  title: title
  body: body_value
destination:
  plugin: 'entity:node'
  default_bundle: news
#  created:
#    plugin: format_date
#    from_format: 'U'
#    to_format: 'U'
#    source: fd.created
#  changed:
#    plugin: format_date
#    from_format: 'U'
#    to_format: 'U'
#    source: fd.changed
#  status:
#    plugin: get
#    source: fd.status
#  nid:
#    plugin: default_value
#    default_value: news
#  uid:
#    plugin: entity_generate
#    source: updated_by
#    value_key: name
#    entity_type: user
#    ignore_case: true
#    default_values:
#      email:
#      plugin: concat
#      source:
#        - updated_by
#        - "@illinois.edu"
#  field_tags:
#    - plugin: skip_on_empty
#      source: news_category
#      method: process
#      message: 'No categories listed.'
#    - plugin: explode
#      delimiter: '	'
#    - plugin: entity_generate
#      entity_type: taxonomy_term
#      bundle: tags
#      value_key: name
#  field_if_date:
#    plugin: format_date
#    from_format: 'U'
#    to_format: 'U'
#    source: fd.changed
#  field_if_author:
#    plugin: get
#    source: author
#    'body/value': text
#    'body/summary': summary
#    'body/format':
#      plugin: default_value
#      default_value: 'basic_html'
